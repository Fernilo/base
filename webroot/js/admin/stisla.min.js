"use strict";!function($,window,i){$.fn.fireModal=function(options){var options=$.extend({size:"modal-md",center:!1,animation:!0,title:"Modal Title",closeButton:!0,header:!0,bodyClass:"",footerClass:"",body:"",buttons:[],autoFocus:!0,removeOnDismiss:!1,created:function(){},appended:function(){},onFormSubmit:function(){},modal:{}},options);this.each((function(){var id="fire-modal-"+ ++i,trigger_class="trigger--"+id,trigger_button=$("."+trigger_class);$(this).addClass(trigger_class);let body=options.body;if("object"==typeof body)if(body.length){let part=body;body=body.removeAttr("id").clone().removeClass("modal-part"),part.remove()}else body='<div class="text-danger">Modal part element not found!</div>';var modal_template='   <div class="modal'+(1==options.animation?" fade":"")+'" tabindex="-1" role="dialog" id="'+id+'">       <div class="modal-dialog '+options.size+(options.center?" modal-dialog-centered":"")+'" role="document">         <div class="modal-content">  '+(1==options.header?'         <div class="modal-header">             <h5 class="modal-title">'+options.title+"</h5>  "+(1==options.closeButton?'           <button type="button" class="close" data-dismiss="modal" aria-label="Close">               <span aria-hidden="true">&times;</span>             </button>  ':"")+"         </div>  ":"")+'         <div class="modal-body">           </div>  '+(options.buttons.length>0?'         <div class="modal-footer">           </div>  ':"")+"       </div>       </div>    </div>  ",modal_template=$(modal_template),this_button;options.buttons.forEach((function(item){let id="id"in item?item.id:"";this_button='<button type="'+("submit"in item&&1==item.submit?"submit":"button")+'" class="'+item.class+'" id="'+id+'">'+item.text+"</button>",this_button=$(this_button).off("click").on("click",(function(){item.handler.call(this,modal_template)})),$(modal_template).find(".modal-footer").append(this_button)})),$(modal_template).find(".modal-body").append(body),options.bodyClass&&$(modal_template).find(".modal-body").addClass(options.bodyClass),options.footerClass&&$(modal_template).find(".modal-footer").addClass(options.footerClass),options.created.call(this,modal_template,options);let modal_form=$(modal_template).find(".modal-body form"),form_submit_btn=modal_template.find("button[type=submit]");if($("body").append(modal_template),options.appended.call(this,$("#"+id),modal_form,options),modal_form.length){options.autoFocus&&$(modal_template).on("shown.bs.modal",(function(){"boolean"==typeof options.autoFocus?modal_form.find("input:eq(0)").focus():"string"==typeof options.autoFocus&&modal_form.find(options.autoFocus).length&&modal_form.find(options.autoFocus).focus()}));let form_object={startProgress:function(){modal_template.addClass("modal-progress")},stopProgress:function(){modal_template.removeClass("modal-progress")}};modal_form.find("button").length||$(modal_form).append('<button class="d-none" id="'+id+'-submit"></button>'),form_submit_btn.click((function(){modal_form.submit()})),modal_form.submit((function(e){form_object.startProgress(),options.onFormSubmit.call(this,modal_template,e,form_object)}))}$(document).on("click","."+trigger_class,(function(){let modal=$("#"+id).modal(options.modal);return options.removeOnDismiss&&modal.on("hidden.bs.modal",(function(){modal.remove()})),!1}))}))},$.destroyModal=function(modal){modal.modal("hide"),modal.on("hidden.bs.modal",(function(){}))},$.cardProgress=function(card,options){var options=$.extend({dismiss:!1,dismissText:"Cancel",spinner:!0,onDismiss:function(){}},options),me=$(card);if(me.addClass("card-progress"),0==options.spinner&&me.addClass("remove-spinner"),1==options.dismiss){var btn_dismiss='<a class="btn btn-danger card-progress-dismiss">'+options.dismissText+"</a>";btn_dismiss=$(btn_dismiss).off("click").on("click",(function(){me.removeClass("card-progress"),me.find(".card-progress-dismiss").remove(),options.onDismiss.call(this,me)})),me.append(btn_dismiss)}return{dismiss:function(dismissed){$.cardProgressDismiss(me,dismissed)}}},$.cardProgressDismiss=function(card,dismissed){var me=$(card);me.removeClass("card-progress"),me.find(".card-progress-dismiss").remove(),dismissed&&dismissed.call(this,me)},$.chatCtrl=function(element,chat){var chat=$.extend({position:"chat-right",text:"",time:moment((new Date).toISOString()).format("hh:mm"),picture:"",type:"text",timeout:0,onShow:function(){}},chat),target=$(element),element='<div class="chat-item '+chat.position+'" style="display:none"><img src="'+chat.picture+'"><div class="chat-details"><div class="chat-text">'+chat.text+'</div><div class="chat-time">'+chat.time+"</div></div></div>",typing_element='<div class="chat-item chat-left chat-typing" style="display:none"><img src="'+chat.picture+'"><div class="chat-details"><div class="chat-text"></div></div></div>',append_element=element;"typing"==chat.type&&(append_element=typing_element),chat.timeout>0?setTimeout((function(){target.find(".chat-content").append($(append_element).fadeIn())}),chat.timeout):target.find(".chat-content").append($(append_element).fadeIn());var target_height=0;target.find(".chat-content .chat-item").each((function(){target_height+=$(this).outerHeight()})),setTimeout((function(){target.find(".chat-content").scrollTop(target_height,-1)}),100),chat.onShow.call(this,append_element)}}(jQuery,this,0);